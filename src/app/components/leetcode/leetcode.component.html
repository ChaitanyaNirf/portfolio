<div *ngIf="isLoading" class="loading">
  Loading LeetCode data...
</div>

<div *ngIf="!isLoading && monthlyData.size === 0" class="no-data">
  No submission data available.
</div>

<div class="user-profile">
  <h2>{{ userProfile.username }}</h2>

  <!-- Global Rank -->
  <p class="global-rank">üåç Global Rank: <strong>{{ userProfile.globalRank }}</strong></p>

  <!-- Problems Solved Section -->
  <div class="stats">
    <p><strong>Problems Solved</strong></p>

    <div class="stat-item">
      <span>Easy</span>
      <div class="progress-bar easy">
        <div [style.width.%]="userProfile.easyPercentage"></div>
      </div>
      <span class="badge easy">{{ userProfile.easySolved }}/{{ userProfile.totalEasy }}</span>
    </div>

    <div class="stat-item">
      <span>Medium</span>
      <div class="progress-bar medium">
        <div [style.width.%]="userProfile.mediumPercentage"></div>
      </div>
      <span class="badge medium">{{ userProfile.mediumSolved }}/{{ userProfile.totalMedium }}</span>
    </div>

    <div class="stat-item">
      <span>Hard</span>
      <div class="progress-bar hard">
        <div [style.width.%]="userProfile.hardPercentage"></div>
      </div>
      <span class="badge hard">{{ userProfile.hardSolved }}/{{ userProfile.totalHard }}</span>
    </div>
  </div>

  <!-- Reputation & Contribution -->
  <div class="reputation">
    ‚≠ê Reputation: <strong>{{ userProfile.reputation }}</strong> | üéñÔ∏è Contribution: <strong>{{ userProfile.contributionPoints }}</strong>
  </div>

  <!-- LeetCode Profile Link -->
  <a class="leetcode-link" [href]="userProfile.profileUrl" target="_blank">
    üîó View LeetCode Profile
  </a>
</div>

<div *ngIf="!isLoading" class="heatmap-container">
  <!-- Display Heatmap -->
  <div *ngFor="let monthKey of monthlyData.keys()" class="month-section">
    <h3>{{ getMonthName(monthKey) }}</h3>
    <table class="heatmap">
      <thead>
        <tr>
          <th>Sun</th>
          <th>Mon</th>
          <th>Tue</th>
          <th>Wed</th>
          <th>Thu</th>
          <th>Fri</th>
          <th>Sat</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let week of getMonthView(monthKey)">
          <td *ngFor="let day of week"
              [style.backgroundColor]="getHeatmapColor(day.count)"
              [attr.title]="day.date ? day.date + ': ' + day.count + ' submissions' : ''">
            {{ day.date ? day.date.split('-')[2] : '' }}
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
